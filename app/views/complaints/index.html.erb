<div class="complaint-index-container">
  <p><%= params[:query]  %></p>
</div>

<div id="map-container">
  <div
  id="map"
  style="width: 100%;
  height: 460px;"
  data-markers="<%= @markers.to_json %>"
  data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"
  data-latitude="<%= @results[0] %>"
  data-longitude="<%= @results[1] %>"
  ></div>
</div>
<div class="complaint-index-container">
  <%= link_to "Add a complaint", root_path, class: "btn btn-primary-red square-btn-red",  "data-toggle" => "modal", "data-target" => "#formModal" %>
</div>

  <div class="container">
    <h5> Complaints around the area </h5>

    <div id="my-div">
      <a href="#" id="clickable_complaint">
        <% @complaints.each do |complaint| %>
        <div class="complaint-container">
          <div class="row">
            <div class="col-8 ">
              <p> "<%= complaint.description %>" </p>
            </div>
            <div class="col-4 upvote-complaints">
             <i class="fas fa-thumbs-up" class="blue-font"></i>
             <%= complaint.upvote %>
           </div>
           <div class="tag">
            <%= complaint.type.name %>
          </div>
        </div>
      </div>
      <% end %>
    </div>
  </a>
</div>
</div>

<!-- Modal for new complaint -->
<div class="modal fade" id="formModal" tabindex="-1" role="dialog" aria-labelledby="formModal" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Add a complaint</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <%= render "shared/form" %>
      </div>
    </div>
  </div>
</div>
